amcl:
  ros__parameters:
    use_sim_time: false

map_server:
  ros__parameters:
    yaml_filename: "/home/hyperlabs/nav2_blank_map/blank.yaml"
    use_sim_time: false

bt_navigator:
  ros__parameters:
    use_sim_time: false
    global_frame: map
    robot_base_frame: base_link
    odom_topic: /odom

planner_server:
  ros__parameters:
    use_sim_time: false
    expected_planner_frequency: 5.0
    planner_plugins: ["GridBased"]
    GridBased:
      plugin: "nav2_navfn_planner/NavfnPlanner"
      tolerance: 0.5
      use_astar: false
      allow_unknown: true

controller_server:
  ros__parameters:
    use_sim_time: false
    controller_frequency: 10.0
    min_x_velocity_threshold: 0.01
    min_theta_velocity_threshold: 0.01
    controller_plugins: ["FollowPath"]
    FollowPath:
      plugin: "dwb_core::DWBLocalPlanner"
      debug_trajectory_details: false
      # velocities
      min_vel_x: 0.0
      max_vel_x: 0.25
      min_speed_xy: 0.0
      max_speed_xy: 0.25
      max_vel_theta: 0.8
      min_vel_theta: 0.0
      # acceleration limits
      acc_lim_x: 0.6
      decel_lim_x: -0.6
      acc_lim_theta: 1.5
      decel_lim_theta: -1.5
      # sampling
      vx_samples: 10
      vtheta_samples: 10
      sim_time: 1.5
      linear_granularity: 0.05
      angular_granularity: 0.025
      transform_tolerance: 0.2
      # goal tolerances
      xy_goal_tolerance: 0.3
      yaw_goal_tolerance: 0.3
      # critics
      critics: [
        "RotateToGoal",
        "Oscillation",
        "GoalAlign",
        "PathAlign",
        "PathDist",
        "GoalDist"
      ]

      # critic weights
      BaseObstacle.scale: 0.02
      PathAlign.scale: 32.0
      GoalAlign.scale: 24.0
      PathDist.scale: 32.0
      GoalDist.scale: 24.0
      RotateToGoal.scale: 32.0
      Oscillation.scale: 1.0

# Costmaps: blank, no obstacles (just a rolling window local + static global)
global_costmap:
  global_costmap:
    ros__parameters:
      use_sim_time: false
      global_frame: map
      robot_base_frame: base_link
      resolution: 0.05
      track_unknown_space: false
      plugins: ["static_layer", "inflation_layer"]
      static_layer:
        plugin: "nav2_costmap_2d::StaticLayer"
        map_subscribe_transient_local: true
      inflation_layer:
        plugin: "nav2_costmap_2d::InflationLayer"
        inflation_radius: 0.4
      always_send_full_costmap: true

local_costmap:
  local_costmap:
    ros__parameters:
      use_sim_time: false
      global_frame: odom
      robot_base_frame: base_link
      rolling_window: true
      width: 6
      height: 6
      resolution: 0.05
      plugins: ["inflation_layer"]
      inflation_layer:
        plugin: "nav2_costmap_2d::InflationLayer"
        inflation_radius: 0.4
      always_send_full_costmap: true

# Make Nav2 publish to your controller topic:
# (Nav2 normally publishes /cmd_vel; you can remap when launching.)
velocity_smoother:
  ros__parameters:
    use_sim_time: false

